# 热词功能使用指南

## 概述

热词（Hotword）功能可以显著提升特定词语在语音识别中的准确率。当您有重要的专业术语、人名、地名或特定词汇需要准确识别时，使用热词功能会非常有效。

## 使用方法

### 1. 前端界面使用

在 Streamlit 应用中：

1. 上传音频文件
2. 在"热词"输入框中输入需要优先识别的词语
3. **多个热词用空格分隔**，例如：`语音 识别 测试`
4. 点击"开始转写"按钮

### 2. 后端 API 使用

```python
from model import ParaformerModel

# 初始化模型
model = ParaformerModel()

# 使用热词进行转写
hotword = "语音 识别 测试"  # 空格分隔
result = model.transcribe("audio.wav", hotword=hotword)
```

## 热词格式规范

### ✅ 正确格式
- 单个热词：`"语音"`
- 多个热词：`"语音 识别 测试"`
- 中文热词：`"是错 试验"`

### ❌ 错误格式
- 逗号分隔：`"语音,识别,测试"` （不支持）
- 其他分隔符：`"语音|识别|测试"` （不支持）

## 最佳实践

### 1. 热词选择
- 选择在音频中频繁出现的重要词汇
- 优先选择容易识别错误的专业术语
- 避免选择过于常见的词汇（如"的"、"是"等）

### 2. 热词数量
- 建议使用 1-5 个热词
- 过多热词可能影响整体识别效果
- 根据音频内容针对性选择

### 3. 测试建议
- 先用少量热词测试效果
- 对比有无热词的识别结果
- 根据实际效果调整热词列表

## 技术实现

### 模型配置
```python
class ParaformerModel:
    def __init__(self, model_dir="paraformer-zh", device=None, 
                 use_vad=True, use_punc=True, use_spk=False):
        # VAD: Voice Activity Detection - 语音活动检测
        # Punc: Punctuation - 标点符号
        # Spk: Speaker - 说话人识别
```

### 热词处理流程
1. 前端接收用户输入的热词字符串
2. 保持空格分隔格式传递给后端
3. 后端直接传递给 FunASR 模型
4. 模型在识别过程中优先考虑热词

## 测试

运行测试脚本验证功能：

```bash
python test_hotword.py
```

测试用例包括：
- 无热词基础转写
- 单个热词转写
- 多个热词转写
- 不同热词组合测试

## 故障排除

### 常见问题

1. **热词没有效果**
   - 检查热词是否在音频中实际出现
   - 确认热词格式正确（空格分隔）
   - 尝试不同的热词组合

2. **识别效果变差**
   - 减少热词数量
   - 选择更具体的热词
   - 检查音频质量

3. **模型加载失败**
   - 检查网络连接
   - 确认模型文件完整
   - 检查 CUDA 环境（如果使用 GPU）

## 更新日志

- **v1.0**: 初始热词功能实现
- **v1.1**: 修正热词格式为空格分隔
- **v1.2**: 添加前端界面支持
- **v1.3**: 完善测试和文档 